!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.horsey=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){var b,c;for(c=0;c<v.length;c++)if(b=v[c],b.el===a)return b.api;return null}function d(a,b){function d(a){V(!0),xa=ya.attachment=a,fa="INPUT"===xa.tagName||"TEXTAREA"===xa.tagName,ga=fa||m(xa),V()}function h(){ea&&ea.refresh()}function l(){o.remove(xa,"focus",va),qa(y)}function y(a){a.forEach(A),ya.suggestions=a}function z(){for(;ta.lastChild;)ta.removeChild(ta.lastChild)}function A(b){function c(){var a=na(b);B(a),M(),xa.focus(),o.fabricate(xa,"horsey-selected",a)}function d(){var c=fa?a.value:a.innerHTML;C(c,b)?f.className=f.className.replace(/ sey-hide/g,""):o.fabricate(f,"horsey-hide")}function e(){F(f)||(f.className+=" sey-hide",ua===f&&K())}var f=i("li","sey-item");return la(f,b),o.add(f,"click",c),o.add(f,"horsey-filter",d),o.add(f,"horsey-hide",e),ta.appendChild(f),ya.suggestions.push(b),f}function B(a){return ja.anchor?(D()?ya.appendText:ya.appendHTML)(a):void sa(a)}function C(a,b){if(ja.anchor){var c=(D()?ya.filterAnchoredText:ya.filterAnchoredHTML)(a,b);return c?ra(c.input,c.suggestion):!1}return ra(a,b)}function D(){return e(xa)}function E(){return-1!==ta.className.indexOf("sey-show")}function F(a){return-1!==a.className.indexOf("sey-hide")}function G(){E()||(ta.className+=" sey-show",ea.refresh(),o.fabricate(xa,"horsey-show"))}function H(a){var b=1===a.which&&!a.metaKey&&!a.ctrlKey;b!==!1&&I()}function I(){E()?M():G()}function J(a){K(),a&&(ua=a,ua.className+=" sey-selected")}function K(){ua&&(ua.className=ua.className.replace(/ sey-selected/g,""),ua=null)}function L(a,b){var c=ta.children.length;if(b>c)return void K();if(0!==c){var d=a?"lastChild":"firstChild",e=a?"previousSibling":"nextSibling",f=ua&&ua[e]||ta[d];J(f),F(f)&&L(a,b?b+1:1)}}function M(){ea.sleep(),ta.className=ta.className.replace(/ sey-show/g,""),K(),o.fabricate(xa,"horsey-hide")}function N(a){var b=E(),c=a.which||a.keyCode;c===u?(ga&&ja.autoShowOnUpDown&&G(),b&&(L(),O(a))):c===t?(ga&&ja.autoShowOnUpDown&&G(),b&&(L(!0),O(a))):b&&(c===r?(ua?o.fabricate(ua,"click"):M(),O(a)):c===s&&(M(),O(a)))}function O(a){a.stopPropagation(),a.preventDefault()}function P(){if(E()){o.fabricate(xa,"horsey-filter");for(var a=ta.firstChild,b=0;a;)b>=pa&&o.fabricate(a,"horsey-hide"),pa>b&&(o.fabricate(a,"horsey-filter"),-1===a.className.indexOf("sey-hide")&&b++),a=a.nextSibling;ua||L(),ua||M()}}function Q(a){var b=a.which||a.keyCode;b!==r&&wa()}function R(a){var b=a.which||a.keyCode;b!==r&&setTimeout(G,0)}function S(a){var b=a.target;if(b===xa)return!0;for(;b;){if(b===ta||b===xa)return!0;b=b.parentNode}}function T(a){S(a)||M()}function U(a){S(a)||M()}function V(a){var b=a?"remove":"add";ea&&(ea.destroy(),ea=null),a||(ea=p(ta,xa,{caret:ga&&"INPUT"!==xa.tagName}),E()||ea.sleep()),"function"!=typeof qa||va.used||(a||ga&&w.activeElement!==xa?o[b](xa,"focus",va):va()),ga?(o[b](xa,"keypress",R),o[b](xa,"keypress",wa),o[b](xa,"keydown",Q),o[b](xa,"paste",wa),o[b](xa,"keydown",N),ja.autoHideOnBlur&&o[b](x,"focus",T,!0)):(o[b](xa,"click",H),o[b](x,"keydown",N)),ja.autoHideOnClick&&o[b](w,"click",U),oa&&o[b](oa,"submit",M)}function W(){V(!0),ka.contains(ta)&&ka.removeChild(ta),v.splice(v.indexOf(za),1)}function X(b){fa?a.value=b:a.innerHTML=b}function Y(a,b){a.innerText=a.textContent=ma(b)}function Z(a,b){var c=ma(b)||"",d=na(b)||"",e=a.toLowerCase();return q(e,c.toLowerCase())||q(e,d.toLowerCase())}function $(a,b){for(var c="",d=!1,e=b.start;d===!1&&e>=0;)c=a.substr(e-1,b.start-e+1),d=ha.test(c),e--;return{text:d?c:null,start:e}}function _(b,c){var d=n(a),e=$(b,d).text;return e?{input:e,suggestion:c}:void 0}function aa(b){var c=a.value,d=n(a),e=$(c,d),f=c.substr(0,e.start),g=c.substr(e.start+e.text.length+(d.end-d.start)),h=f+b+" ";a.value=h+g,n(a,{start:h.length,end:h.length})}function ba(){throw new Error("Anchoring in editable elements is disabled by default.")}function ca(){throw new Error("Anchoring in editable elements is disabled by default.")}var da=c(a);if(da)return da;var ea,fa,ga,ha,ia,ja=b||{},ka=ja.appendTo||w.body,la=ja.render||Y,ma=ja.getText||g,na=ja.getValue||f,oa=ja.form,pa="number"==typeof ja.limit?ja.limit:1/0,qa=ja.suggestions,ra=ja.filter||Z,sa=ja.set||X,ta=i("ul","sey-list"),ua=null,va=j(l),wa=k(P),xa=a;void 0===ja.autoHideOnBlur&&(ja.autoHideOnBlur=!0),void 0===ja.autoHideOnClick&&(ja.autoHideOnClick=!0),void 0===ja.autoShowOnUpDown&&(ja.autoShowOnUpDown="INPUT"===a.tagName),ja.anchor&&(ha=new RegExp("^"+ja.anchor),ia=new RegExp(ja.anchor+"$"));var ya={add:A,anchor:ja.anchor,clear:z,show:G,hide:M,toggle:I,destroy:W,refreshPosition:h,appendText:aa,appendHTML:ca,filterAnchoredText:_,filterAnchoredHTML:ba,defaultAppendText:aa,defaultFilter:Z,defaultGetText:g,defaultGetValue:f,defaultRenderer:Y,defaultSetter:X,retarget:d,attachment:xa,list:ta,suggestions:[]},za={el:a,api:ya};return d(a),v.push(za),ka.appendChild(ta),a.setAttribute("autocomplete","off"),Array.isArray(qa)&&y(qa),ya}function e(a){return"INPUT"===a.tagName||"TEXTAREA"===a.tagName}function f(a){return h("value",a)}function g(a){return h("text",a)}function h(a,b){return b&&void 0!==b[a]?b[a]:b}function i(a,b){var c=w.createElement(a);return c.className=b,c}function j(a){function b(){c||(b.used=c=!0,(a||l).apply(null,arguments))}var c;return b}function k(a){return function(){setTimeout(a,0)}}function l(){}function m(a){var b=a.getAttribute("contentEditable");return"false"===b?!1:"true"===b?!0:a.parentElement?m(a.parentElement):!1}var n=a("sell"),o=a("crossvent"),p=a("bullseye"),q=a("fuzzysearch"),r=13,s=27,t=38,u=40,v=[],w=document,x=w.documentElement;d.find=c,b.exports=d},{bullseye:2,crossvent:14,fuzzysearch:16,sell:17}],2:[function(a,b){"use strict";function c(a,b,c){function g(){q.sleeping=!0}function h(){return i()}function i(a){var c=b.getBoundingClientRect(),d=document.body.scrollTop||document.documentElement.scrollTop;return r?(a=r.read(),{x:(a.absolute?0:c.left)+a.x,y:(a.absolute?0:c.top)+d+a.y+20}):{x:c.left,y:c.top+d}}function j(a){k(a)}function k(c){if(o)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(r&&!c)return q.sleeping=!1,void r.refresh();var d=i(c);r||b===a||(d.y+=b.offsetHeight),a.style.left=d.x+"px",a.style.top=d.y+"px"}function l(){r&&r.destroy(),d.remove(window,"resize",p),o=!0}var m=c,n=b&&b.tagName;n||2!==arguments.length||(m=b),n||(b=a),m||(m={});var o=!1,p=e(k,30),q={update:m.autoupdateToCaret!==!1&&j},r=m.caret&&f(b,q);return k(),m.tracking!==!1&&d.add(window,"resize",p),{read:h,refresh:k,destroy:l,sleep:g}}var d=a("crossvent"),e=a("./throttle"),f=a("./tailormade");b.exports=c},{"./tailormade":11,"./throttle":12,crossvent:14}],3:[function(a,b){(function(c){"use strict";var d,e=c.document,f=a("./getSelectionRaw"),g=a("./getSelectionNullOp"),h=a("./getSelectionSynthetic"),i=a("./isHost");d=i.method(c,"getSelection")?f:"object"==typeof e.selection&&e.selection?h:g,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":4,"./getSelectionRaw":5,"./getSelectionSynthetic":6,"./isHost":7}],4:[function(a,b){"use strict";function c(){}function d(){return{removeAllRanges:c,addRange:c}}b.exports=d},{}],5:[function(a,b){(function(a){"use strict";function c(){return a.getSelection()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(a,b){(function(c){"use strict";function d(a){var b=this,c=a.createRange();this._selection=a,this._ranges=[],"Control"===a.type?m(b):k(c)?l(b,c):h(b)}function e(a,b){for(var c,d=t.createControlRange(),e=0,f=b.length;f>e;++e){c=j(b[e]);try{d.add(c)}catch(g){throw new Error("setRanges(): Element could not be added to control selection")}}d.select(),m(a)}function f(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;e>d;++d)o(b,c[d])||a.addRange(c[d]);a.rangeCount||h(a)}function g(a,b){var c="start",d="end";a.anchorNode=b[c+"Container"],a.anchorOffset=b[c+"Offset"],a.focusNode=b[d+"Container"],a.focusOffset=b[d+"Offset"]}function h(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function i(a){if(!a.length||1!==a[0].nodeType)return!1;for(var b=1,c=a.length;c>b;++b)if(!p(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return b[0]}function k(a){return a&&void 0!==a.text}function l(a,b){a._ranges=[b],g(a,b,!1),a.rangeCount=1,a.isCollapsed=b.collapsed}function m(a){if(a._ranges.length=0,"None"===a._selection.type)h(a);else{var b=a._selection.createRange();if(k(b))l(a,b);else{a.rangeCount=b.length;for(var c,d=0;d<a.rangeCount;++d)c=s.createRange(),c.selectNode(b.item(d)),a._ranges.push(c);a.isCollapsed=1===a.rangeCount&&a._ranges[0].collapsed,g(a,a._ranges[a.rangeCount-1],!1)}}}function n(a,b){for(var c=a._selection.createRange(),d=j(b),e=t.createControlRange(),f=0,g=c.length;g>f;++f)e.add(c.item(f));try{e.add(d)}catch(h){throw new Error("addRange(): Element could not be added to control selection")}e.select(),m(a)}function o(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}function p(a,b){for(var c=b;c.parentNode;){if(c.parentNode===a)return!0;c=c.parentNode}return!1}function q(){return new d(c.document.selection)}var r=a("./rangeToTextRange"),s=c.document,t=s.body,u=d.prototype;u.removeAllRanges=function(){var a;try{this._selection.empty(),"None"!==this._selection.type&&(a=t.createTextRange(),a.select(),this._selection.empty())}catch(b){}h(this)},u.addRange=function(a){"Control"===this._selection.type?n(this,a):(r(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,g(this,a,!1))},u.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?e(this,a):b&&this.addRange(a[0])},u.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[a].cloneRange()},u.removeRange=function(a){if("Control"!==this._selection.type)return void f(this,a);for(var b,c=this._selection.createRange(),d=j(a),e=t.createControlRange(),g=!1,h=0,i=c.length;i>h;++h)b=c.item(h),b!==d||g?e.add(c.item(h)):g=!0;e.select(),m(this)},u.eachRange=function(a,b){var c=0,d=this._ranges.length;for(c=0;d>c;++c)if(a(this.getRangeAt(c)))return b},u.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},u.setSingleRange=function(a){this.removeAllRanges(),this.addRange(a)},b.exports=q}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":8}],7:[function(a,b){"use strict";function c(a,b){var c=typeof a[b];return"function"===c||!("object"!==c||!a[b])||"unknown"===c}function d(a,b){return"undefined"!=typeof a[b]}function e(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}b.exports={method:c,methods:e(c),property:d,properties:e(d)}},{}],8:[function(a,b){(function(a){"use strict";function c(a){if(a.collapsed)return e({node:a.startContainer,offset:a.startOffset},!0);var b=e({node:a.startContainer,offset:a.startOffset},!0),c=e({node:a.endContainer,offset:a.endOffset},!1),d=g.createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d}function d(a){var b=a.nodeType;return 3===b||4===b||8===b}function e(a,b){var c,e,h,i,j=a.offset,k=g.createTextRange(),l=d(a.node);return l?(c=a.node,e=c.parentNode):(i=a.node.childNodes,c=j<i.length?i[j]:null,e=a.node),h=f.createElement("span"),h.innerHTML="&#feff;",c?e.insertBefore(h,c):e.appendChild(h),k.moveToElementText(h),k.collapse(!b),e.removeChild(h),l&&k[b?"moveStart":"moveEnd"]("character",j),k}var f=a.document,g=f.body;b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b){"use strict";var c=a("./getSelection"),d=a("./setSelection");b.exports={get:c,set:d}},{"./getSelection":3,"./setSelection":10}],10:[function(a,b){(function(c){"use strict";function d(a){function b(){var b=e(),c=g.createRange();a.startContainer&&(a.endContainer?c.setEnd(a.endContainer,a.endOffset):c.setEnd(a.startContainer,a.startOffset),c.setStart(a.startContainer,a.startOffset),b.removeAllRanges(),b.addRange(c))}function c(){f(a).select()}g.createRange?b():c()}var e=a("./getSelection"),f=a("./rangeToTextRange"),g=c.document;b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":3,"./rangeToTextRange":8}],11:[function(a,b){(function(c){"use strict";function d(a,b){function c(){}function d(){return(v?n:o)()}function g(){return x.sleeping?void 0:(x.update||c)(d())}function n(){var b=e(a),c=r(),d=p(c,b.start);return l.body.removeChild(c.mirror),d}function o(){var a=i();if(a.rangeCount){var b=a.getRangeAt(0),c="P"===b.startContainer.nodeName&&0===b.startOffset;if(c)return{x:b.startContainer.offsetLeft,y:b.startContainer.offsetTop,absolute:!0};if(b.getClientRects){var d=b.getClientRects();if(d.length>0)return{x:d[0].left,y:d[0].top,absolute:!0}}}return{x:0,y:0}}function p(b,c){var d=l.createElement("span"),e=b.mirror,f=b.computed;return s(e,q(a).substring(0,c)),"INPUT"===a.tagName&&(e.textContent=e.textContent.replace(/\s/g,"\xc2 ")),s(d,q(a).substring(c)||"."),e.appendChild(d),{x:d.offsetLeft+parseInt(f.borderLeftWidth),y:d.offsetTop+parseInt(f.borderTopWidth)}}function q(a){return v?a.value:a.innerHTML}function r(){function b(a){e[a]=c[a]}var c=k.getComputedStyle?getComputedStyle(a):a.currentStyle,d=l.createElement("div"),e=d.style;return l.body.appendChild(d),"INPUT"!==a.tagName&&(e.wordWrap="break-word"),e.whiteSpace="pre-wrap",e.position="absolute",e.visibility="hidden",j.forEach(b),m?(e.width=parseInt(c.width)-2+"px",a.scrollHeight>parseInt(c.height)&&(e.overflowY="scroll")):e.overflow="hidden",{mirror:d,computed:c}}function s(a,b){v?a.textContent=b:a.innerHTML=b}function t(b){var c=b?"remove":"add";f[c](a,"keydown",w),f[c](a,"keyup",w),f[c](a,"input",w),f[c](a,"paste",w),f[c](a,"change",w)}function u(){t(!0)}var v="INPUT"===a.tagName||"TEXTAREA"===a.tagName,w=h(g,30),x=b||{};return t(),{read:d,refresh:w,destroy:u}}var e=a("sell"),f=a("crossvent"),g=a("seleccion"),h=a("./throttle"),i=g.get,j=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],k=c,l=document,m=null!==k.mozInnerScreenX&&void 0!==k.mozInnerScreenX;b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./throttle":12,crossvent:14,seleccion:9,sell:17}],12:[function(a,b){"use strict";function c(a,b){var c,d=-1/0;return function(){function e(){clearTimeout(c),c=null;var f=d+b,g=Date.now();g>f?(d=g,a()):c=setTimeout(e,f-g)}c||e()}}b.exports=c},{}],13:[function(a,b){(function(a){function c(){try{var a=new d("cat",{detail:{foo:"bar"}});return"cat"===a.type&&"bar"===a.detail.foo}catch(b){}return!1}var d=a.CustomEvent;b.exports=c()?d:"function"==typeof document.createEvent?function(a,b){var c=document.createEvent("CustomEvent");return b?c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail):c.initCustomEvent(a,!1,!1,void 0),c}:function(a,b){var c=document.createEventObject();return c.type=a,b?(c.bubbles=Boolean(b.bubbles),c.cancelable=Boolean(b.cancelable),c.detail=b.detail):(c.bubbles=!1,c.cancelable=!1,c.detail=void 0),c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(a,b){(function(c){"use strict";function d(a,b,c,d){return a.addEventListener(b,c,d)}function e(a,b,c){return a.attachEvent("on"+b,j(a,b,c))}function f(a,b,c,d){return a.removeEventListener(b,c,d)}function g(a,b,c){return a.detachEvent("on"+b,k(a,b,c))}function h(a,b,c){function d(){var a;return o.createEvent?(a=o.createEvent("Event"),a.initEvent(b,!0,!0)):o.createEventObject&&(a=o.createEventObject()),a}function e(){return new m(b,{detail:c})}var f=-1===n.indexOf(b)?e():d();a.dispatchEvent?a.dispatchEvent(f):a.fireEvent("on"+b,f)}function i(a,b,d){return function(b){var e=b||c.event;e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},e.which=e.which||e.keyCode,d.call(a,e)}}function j(a,b,c){var d=k(a,b,c)||i(a,b,c);return r.push({wrapper:d,element:a,type:b,fn:c}),d}function k(a,b,c){var d=l(a,b,c);if(d){var e=r[d].wrapper;return r.splice(d,1),e}}function l(a,b,c){var d,e;for(d=0;d<r.length;d++)if(e=r[d],e.element===a&&e.type===b&&e.fn===c)return d}var m=a("custom-event"),n=a("./eventmap"),o=document,p=d,q=f,r=[];c.addEventListener||(p=e,q=g),b.exports={add:p,remove:q,fabricate:h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":15,"custom-event":13}],15:[function(a,b){(function(a){"use strict";var c=[],d="",e=/^on/;for(d in a)e.test(d)&&c.push(d.slice(2));b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(a,b){"use strict";function c(a,b){var c=b.length,d=a.length;if(d>c)return!1;if(d===c)return a===b;a:for(var e=0,f=0;d>e;e++){for(var g=a.charCodeAt(e);c>f;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0}b.exports=c},{}],17:[function(a,b){"use strict";function c(a){return{start:a.selectionStart,end:a.selectionEnd}}function d(a){function b(b,d){return c!==a&&(c?c.focus():a.blur()),{start:b,end:d}}var c=document.activeElement;c!==a&&a.focus();var d=document.selection.createRange(),g=d.getBookmark(),h=a.value,i=e(h),j=d.parentElement();if(null===j||!f(j))return b(0,0);d.text=i+d.text+i;var k=a.value;return a.value=h,d.moveToBookmark(g),d.select(),b(k.indexOf(i),k.lastIndexOf(i)-i.length)}function e(a){var b;do b="@@marker."+Math.random()*new Date;while(-1!==a.indexOf(b));return b}function f(a){return"INPUT"===a.tagName&&"text"===a.type||"TEXTAREA"===a.tagName}function g(a,b){a.selectionStart=i(a,b.start),a.selectionEnd=i(a,b.end)}function h(a,b){var c=a.createTextRange();"end"===b.start&&"end"===b.end?(c.collapse(!1),c.select()):(c.collapse(!0),c.moveEnd("character",i(a,b.end)),c.moveStart("character",i(a,b.start)),c.select())}function i(a,b){return"end"===b?a.value.length:b||0}function j(a,b){return 2===arguments.length&&l(a,b),k(a)}var k=c,l=g;document.selection&&document.selection.createRange&&(k=d,l=h),b.exports=j},{}]},{},[1])(1)}),function(a,b){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a.Mustache={},b(Mustache))}(this,function(a){function d(a){return"function"==typeof a}function e(a){return c(a)?"array":typeof a}function f(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function g(a,b){return null!=a&&"object"==typeof a&&b in a}function i(a,b){return h.call(a,b)}function k(a){return!i(j,a)}function m(a){return String(a).replace(/[&<>"'\/]/g,function(a){return l[a]})}function s(b,d){function l(){if(i&&!j)for(;h.length;)delete g[h.pop()];else h=[];i=!1,j=!1}function x(a){if("string"==typeof a&&(a=a.split(o,2)),!c(a)||2!==a.length)throw new Error("Invalid tags: "+a);m=new RegExp(f(a[0])+"\\s*"),s=new RegExp("\\s*"+f(a[1])),w=new RegExp("\\s*"+f("}"+a[1]))}if(!b)return[];var m,s,w,e=[],g=[],h=[],i=!1,j=!1;x(d||a.tags);for(var z,A,B,C,D,E,y=new v(b);!y.eos();){if(z=y.pos,B=y.scanUntil(m))for(var F=0,G=B.length;G>F;++F)C=B.charAt(F),k(C)?h.push(g.length):j=!0,g.push(["text",C,z,z+1]),z+=1,"\n"===C&&l();if(!y.scan(m))break;if(i=!0,A=y.scan(r)||"name",y.scan(n),"="===A?(B=y.scanUntil(p),y.scan(p),y.scanUntil(s)):"{"===A?(B=y.scanUntil(w),y.scan(q),y.scanUntil(s),A="&"):B=y.scanUntil(s),!y.scan(s))throw new Error("Unclosed tag at "+y.pos);if(D=[A,B,z,y.pos],g.push(D),"#"===A||"^"===A)e.push(D);else if("/"===A){if(E=e.pop(),!E)throw new Error('Unopened section "'+B+'" at '+z);if(E[1]!==B)throw new Error('Unclosed section "'+E[1]+'" at '+z)}else"name"===A||"{"===A||"&"===A?j=!0:"="===A&&x(B)}if(E=e.pop())throw new Error('Unclosed section "'+E[1]+'" at '+y.pos);return u(t(g))}function t(a){for(var c,d,b=[],e=0,f=a.length;f>e;++e)c=a[e],c&&("text"===c[0]&&d&&"text"===d[0]?(d[1]+=c[1],d[3]=c[3]):(b.push(c),d=c));return b}function u(a){for(var e,f,b=[],c=b,d=[],g=0,h=a.length;h>g;++g)switch(e=a[g],e[0]){case"#":case"^":c.push(e),d.push(e),c=e[4]=[];break;case"/":f=d.pop(),f[5]=e[2],c=d.length>0?d[d.length-1][4]:b;break;default:c.push(e)}return b}function v(a){this.string=a,this.tail=a,this.pos=0}function w(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function x(){this.cache={}}var b=Object.prototype.toString,c=Array.isArray||function(a){return"[object Array]"===b.call(a)},h=RegExp.prototype.test,j=/\S/,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},n=/\s*/,o=/\s+/,p=/\s*=/,q=/\s*\}/,r=/#|\^|\/|>|\{|&|=|!/;v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},v.prototype.scanUntil=function(a){var c,b=this.tail.search(a);switch(b){case-1:c=this.tail,this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b),this.tail=this.tail.substring(b)}return this.pos+=c.length,c},w.prototype.push=function(a){return new w(a,this)},w.prototype.lookup=function(a){var c,b=this.cache;if(b.hasOwnProperty(a))c=b[a];else{for(var f,h,e=this,i=!1;e;){if(a.indexOf(".")>0)for(c=e.view,f=a.split("."),h=0;null!=c&&h<f.length;)h===f.length-1&&(i=g(c,f[h])),c=c[f[h++]];else c=e.view[a],i=g(e.view,a);if(i)break;e=e.parent}b[a]=c}return d(c)&&(c=c.call(this.view)),c},x.prototype.clearCache=function(){this.cache={}},x.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=s(a,b)),d},x.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof w?b:new w(b);return this.renderTokens(d,e,c,a)},x.prototype.renderTokens=function(a,b,c,d){for(var f,g,h,e="",i=0,j=a.length;j>i;++i)h=void 0,f=a[i],g=f[0],"#"===g?h=this.renderSection(f,b,c,d):"^"===g?h=this.renderInverted(f,b,c,d):">"===g?h=this.renderPartial(f,b,c,d):"&"===g?h=this.unescapedValue(f,b):"name"===g?h=this.escapedValue(f,b):"text"===g&&(h=this.rawValue(f)),void 0!==h&&(e+=h);return e},x.prototype.renderSection=function(a,b,e,f){function j(a){return g.render(a,b,e)}var g=this,h="",i=b.lookup(a[1]);if(i){if(c(i))for(var k=0,l=i.length;l>k;++k)h+=this.renderTokens(a[4],b.push(i[k]),e,f);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],b.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(b.view,f.slice(a[3],a[5]),j),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],b,e,f);return h}},x.prototype.renderInverted=function(a,b,d,e){var f=b.lookup(a[1]);return!f||c(f)&&0===f.length?this.renderTokens(a[4],b,d,e):void 0},x.prototype.renderPartial=function(a,b,c){if(c){var e=d(c)?c(a[1]):c[a[1]];return null!=e?this.renderTokens(this.parse(e),b,c,e):void 0}},x.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);return null!=c?c:void 0},x.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);return null!=d?a.escape(d):void 0},x.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.2.0",a.tags=["{{","}}"];var y=new x;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,c){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+e(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=m,a.Scanner=v,a.Context=w,a.Writer=x}),!function(a){var b,c,d,e;!function(){var a={},f={};b=function(b,c,d){a[b]={deps:c,callback:d}},e=d=c=function(b){function d(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(e._eak_seen=a,f[b])return f[b];if(f[b]={},!a[b])throw new Error("Could not find module "+b);for(var g,h=a[b],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)"exports"===i[l]?k.push(g={}):k.push(c(d(i[l])));var n=j.apply(this,k);return f[b]=g||n}}(),b("rsvp/all",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.all(a,b)}}),b("rsvp/all_settled",["./promise","./utils","exports"],function(a,b,c){"use strict";function d(a){return{state:"fulfilled",value:a}}function e(a){return{state:"rejected",reason:a}}var f=a["default"],g=b.isArray,h=b.isNonThenable;c["default"]=function(a,b){return new f(function(b){function c(a){return function(b){j(a,d(b))}}function i(a){return function(b){j(a,e(b))}}function j(a,c){m[a]=c,0===--l&&b(m)}if(!g(a))throw new TypeError("You must pass an array to allSettled.");var k,l=a.length;if(0===l)return void b([]);for(var m=new Array(l),n=0;n<a.length;n++)k=a[n],h(k)?j(n,d(k)):f.cast(k).then(c(n),i(n))},b)}}),b("rsvp/asap",["exports"],function(a){"use strict";function b(){return function(){process.nextTick(e)}}function c(){var a=0,b=new h(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){return function(){setTimeout(e,1)}}function e(){for(var a=0;a<i.length;a++){var b=i[a],c=b[0],d=b[1];c(d)}i=[]}a["default"]=function(a,b){var c=i.push([a,b]);1===c&&f()};var f,g="undefined"!=typeof window?window:{},h=g.MutationObserver||g.WebKitMutationObserver,i=[];f="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():h?c():d()}),b("rsvp/config",["./events","exports"],function(a,b){"use strict";function c(a,b){return"onerror"===a?void e.on("error",b):2!==arguments.length?e[a]:void(e[a]=b)}var d=a["default"],e={instrument:!1};d.mixin(e),b.config=e,b.configure=c}),b("rsvp/defer",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a){var b={};return b.promise=new c(function(a,c){b.resolve=a,b.reject=c},a),b}}),b("rsvp/events",["exports"],function(a){"use strict";var b=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},c=function(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b};a["default"]={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,d){var e,f=c(this);e=f[a],e||(e=f[a]=[]),-1===b(e,d)&&e.push(d)},off:function(a,d){var e,f,g=c(this);return d?(e=g[a],f=b(e,d),void(-1!==f&&e.splice(f,1))):void(g[a]=[])},trigger:function(a,b){var d,e,f=c(this);if(d=f[a])for(var g=0;g<d.length;g++)(e=d[g])(b)}}}),b("rsvp/filter",["./all","./map","./utils","exports"],function(a,b,c,d){"use strict";function e(a,b,c){if(!i(a))throw new TypeError("You must pass an array to filter.");if(!h(b))throw new TypeError("You must pass a function to filter's second argument.");return f(a,c).then(function(d){return g(a,b,c).then(function(a){var b,c=d.length,e=[];for(b=0;c>b;b++)a[b]&&e.push(d[b]);return e})})}var f=a["default"],g=b["default"],h=c.isFunction,i=c.isArray;d["default"]=e}),b("rsvp/hash",["./promise","./utils","exports"],function(a,b,c){"use strict";var d=a["default"],e=b.isNonThenable,f=b.keysOf;c["default"]=function(a){return new d(function(b,c){function g(a){return function(c){k[a]=c,0===--m&&b(k)}}function h(a){m=0,c(a)}var i,j,k={},l=f(a),m=l.length;if(0===m)return void b(k);for(var n=0;n<l.length;n++)j=l[n],i=a[j],e(i)?(k[j]=i,0===--m&&b(k)):d.cast(i).then(g(j),h)})}}),b("rsvp/instrument",["./config","./utils","exports"],function(a,b,c){"use strict";var d=a.config,e=b.now;c["default"]=function(a,b,c){try{d.trigger(a,{guid:b._guidKey+b._id,eventName:a,detail:b._detail,childGuid:c&&b._guidKey+c._id,label:b._label,timeStamp:e(),stack:new Error(b._label).stack})}catch(f){setTimeout(function(){throw f},0)}}}),b("rsvp/map",["./promise","./all","./utils","exports"],function(a,b,c,d){"use strict";a["default"];var e=b["default"],f=c.isArray,g=c.isFunction;d["default"]=function(a,b,c){if(!f(a))throw new TypeError("You must pass an array to map.");if(!g(b))throw new TypeError("You must pass a function to map's second argument.");return e(a,c).then(function(a){var d,f=a.length,g=[];for(d=0;f>d;d++)g.push(b(a[d]));return e(g,c)})}}),b("rsvp/node",["./promise","exports"],function(a,b){"use strict";function c(a,b){return function(c,d){c?b(c):a(arguments.length>2?e.call(arguments,1):d)}}var d=a["default"],e=Array.prototype.slice;b["default"]=function(a,b){return function(){var f=e.call(arguments),g=this||b;return new d(function(b,e){d.all(f).then(function(d){try{d.push(c(b,e)),a.apply(g,d)}catch(f){e(f)}})})}}}),b("rsvp/promise",["./config","./events","./instrument","./utils","./promise/cast","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(){}function l(a,b){if(!z(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._id=H++,this._label=b,this._subscribers=[],w.instrument&&x("created",this),k!==a&&m(a,this)}function m(a,b){function c(a){r(b,a)}function d(a){t(b,a)}try{a(c,d)}catch(e){d(e)}}function n(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+K]=c,e[f+L]=d}function o(a,b){var c,d,e=a._subscribers,f=a._detail;w.instrument&&x(b===K?"fulfilled":"rejected",a);for(var g=0;g<e.length;g+=3)c=e[g],d=e[g+b],p(b,c,d,f);a._subscribers=null}function p(a,b,c,d){var e,f,g,h,i=z(c);if(i)try{e=c(d),g=!0}catch(j){h=!0,f=j}else e=d,g=!0;q(b,e)||(i&&g?r(b,e):h?t(b,f):a===K?r(b,e):a===L&&t(b,e))}function q(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(y(b)&&(d=b.then,z(d)))return d.call(b,function(d){return c?!0:(c=!0,void(b!==d?r(a,d):s(a,d)))},function(b){return c?!0:(c=!0,void t(a,b))},"derived from: "+(a._label||" unknown promise")),!0}catch(e){return c?!0:(t(a,e),!0)}return!1}function r(a,b){a===b?s(a,b):q(a,b)||s(a,b)}function s(a,b){a._state===I&&(a._state=J,a._detail=b,w.async(u,a))}function t(a,b){a._state===I&&(a._state=J,a._detail=b,w.async(v,a))}function u(a){o(a,a._state=K)}function v(a){a._onerror&&a._onerror(a._detail),o(a,a._state=L)}var w=a.config;b["default"];var x=c["default"],y=d.objectOrFunction,z=d.isFunction,A=d.now,B=e["default"],C=f["default"],D=g["default"],E=h["default"],F=i["default"],G="rsvp_"+A()+"-",H=0;j["default"]=l,
l.cast=B,l.all=C,l.race=D,l.resolve=E,l.reject=F;var I=void 0,J=0,K=1,L=2;l.prototype={constructor:l,_id:void 0,_guidKey:G,_label:void 0,_state:void 0,_detail:void 0,_subscribers:void 0,_onerror:function(a){w.trigger("error",a)},then:function(a,b,c){var d=this;this._onerror=null;var e=new this.constructor(k,c);if(this._state){var f=arguments;w.async(function(){p(d._state,e,f[d._state-1],d._detail)})}else n(this,e,a,b);return w.instrument&&x("chained",d,e),e},"catch":function(a,b){return this.then(null,a,b)},"finally":function(a,b){var c=this.constructor;return this.then(function(b){return c.cast(a()).then(function(){return b})},function(b){return c.cast(a()).then(function(){throw b})},b)}}}),b("rsvp/promise/all",["../utils","exports"],function(a,b){"use strict";var c=a.isArray,d=a.isNonThenable;b["default"]=function(a,b){var e=this;return new e(function(b,f){function g(a){return function(c){k[a]=c,0===--j&&b(k)}}function h(a){j=0,f(a)}if(!c(a))throw new TypeError("You must pass an array to all.");var i,j=a.length,k=new Array(j);if(0===j)return void b(k);for(var l=0;l<a.length;l++)i=a[l],d(i)?(k[l]=i,0===--j&&b(k)):e.cast(i).then(g(l),h)},b)}}),b("rsvp/promise/cast",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)},b)}}),b("rsvp/promise/race",["../utils","exports"],function(a,b){"use strict";var c=a.isArray;a.isFunction;var d=a.isNonThenable;b["default"]=function(a,b){var e,f=this;return new f(function(b,g){function h(a){j&&(j=!1,b(a))}function i(a){j&&(j=!1,g(a))}if(!c(a))throw new TypeError("You must pass an array to race.");for(var j=!0,k=0;k<a.length;k++){if(e=a[k],d(e))return j=!1,void b(e);f.cast(e).then(h,i)}},b)}}),b("rsvp/promise/reject",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return new c(function(b,c){c(a)},b)}}),b("rsvp/promise/resolve",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return new c(function(b){b(a)},b)}}),b("rsvp/race",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.race(a,b)}}),b("rsvp/reject",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.reject(a,b)}}),b("rsvp/resolve",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.resolve(a,b)}}),b("rsvp/rethrow",["exports"],function(a){"use strict";a["default"]=function(a){throw setTimeout(function(){throw a}),a}}),b("rsvp/utils",["exports"],function(a){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return!b(a)}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}a.objectOrFunction=b,a.isFunction=c,a.isNonThenable=d,a.isArray=e;var f=Date.now||function(){return(new Date).getTime()};a.now=f;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};a.keysOf=g}),b("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all_settled","./rsvp/race","./rsvp/hash","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/asap","./rsvp/filter","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(a,b){C.async(a,b)}function r(){C.on.apply(C,arguments)}function s(){C.off.apply(C,arguments)}var t=a["default"],u=b["default"],v=c["default"],w=d["default"],x=e["default"],y=f["default"],z=g["default"],A=h["default"],B=i["default"],C=j.config,D=j.configure,E=k["default"],F=l["default"],G=m["default"],H=n["default"],I=o["default"];if(C.async=H,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var J=window.__PROMISE_INSTRUMENTATION__;D("instrument",!0);for(var K in J)J.hasOwnProperty(K)&&r(K,J[K])}p.Promise=t,p.EventTarget=u,p.all=w,p.allSettled=x,p.race=y,p.hash=z,p.rethrow=A,p.defer=B,p.denodeify=v,p.configure=D,p.on=r,p.off=s,p.resolve=F,p.reject=G,p.async=q,p.map=E,p.filter=I}),a.RSVP=c("rsvp")}(window);var APP={response:{},products:[],itemsTpl:"",productsContainer:"",productTpl:"",searchInput:"",init:function(){APP.searchInput=document.getElementById("search"),APP.itemsTpl=document.getElementById("itemsTpl").innerHTML,APP.productsContainer=document.getElementById("products"),APP.productTpl=document.getElementById("productTpl").innerHTML,APP.getJSON("data.json").then(function(a){APP.response=a,APP.initSearch(a),APP.renderTemplate(APP.itemsTpl,a,APP.productsContainer)},function(a){console.log("nay...")})["catch"](function(a){console.log(a)})},initSearch:function(a){horsey(APP.searchInput,{suggestions:APP.populateAutocomplete(a),set:function(a){APP.searchInput.value=a}})},populateAutocomplete:function(a){var b=[];return a.categories.map(function(a){a.items.map(function(a){APP.products.push(a),b.push(a.name)})}),b},renderTemplate:function(a,b,c){c.innerHTML=Mustache.render(a,b)},getJSON:function(a){var b=new RSVP.Promise(function(b,c){function e(){this.readyState===this.DONE&&(200===this.status?b(this.response):c(this))}var d=new XMLHttpRequest;d.open("GET",a),d.onreadystatechange=e,d.responseType="json",d.setRequestHeader("Accept","application/json"),d.send()});return b},search:function(){var a;APP.products.map(function(b){b.name==APP.searchInput.value&&(a=b)}),""==APP.searchInput.value?APP.renderTemplate(APP.itemsTpl,APP.response,APP.productsContainer):APP.renderTemplate(APP.productTpl,a,APP.productsContainer)}};document.addEventListener("DOMContentLoaded",function(){APP.init(),document.getElementById("search-button").addEventListener("click",function(){APP.search()}),document.addEventListener("keydown",function(a){var b=window.event?a.keyCode:a.which;13==b&&APP.search()})});